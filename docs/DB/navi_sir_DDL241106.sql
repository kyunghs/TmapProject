CREATE DATABASE navi_sir;

CREATE TABLE parking_info (
    NUM_OF_INDEX SERIAL PRIMARY KEY,
    PARKING_CODE SERIAL UNIQUE,
    PARKING_NAME VARCHAR(100),
    ADDR VARCHAR(255),
    OPERATION_RULE_NM VARCHAR(100),
    CAPACITY INT,
    CUR_PARKING INT,
    CUR_PARKING_TIME TIMESTAMP,
    PAY_YN CHAR(1),
    RATES DECIMAL(10, 2),
    ADD_RATES DECIMAL(10, 2),
    DAY_MAXIMUM DECIMAL(10, 2),
    LAT DECIMAL(10, 7),
    LNG DECIMAL(10, 7)
);

CREATE TABLE CH_PA_MARKER (
    NUM_OF_INDEX SERIAL PRIMARY KEY,
    CHARGER_CODE SERIAL UNIQUE,
    PARKING_CODE INT NOT NULL,
    ADDR VARCHAR(255),
    LAT DECIMAL(10, 7),
    LNG DECIMAL(10, 7),
    FOREIGN KEY (PARKING_CODE) REFERENCES parking_info(PARKING_CODE) ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE TABLE charge_info (
    NUM_OF_INDEX SERIAL PRIMARY KEY,
    CHARGER_CODE INT NOT NULL,
    CHARGER_NAME VARCHAR(100),
    ADDR VARCHAR(255),
    OPERATION_RULE_NM VARCHAR(100),
    PAY_YN CHAR(1),
    RATES DECIMAL(10, 2),
    ADD_RATES DECIMAL(10, 2),
    DAY_MAXIMUM DECIMAL(10, 2),
    LAT DECIMAL(10, 7),
    LNG DECIMAL(10, 7),
    CHARGER_TYPE VARCHAR(10),
    FOREIGN KEY (CHARGER_CODE) REFERENCES CH_PA_MARKER(CHARGER_CODE) ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE TABLE USER_info (
    USER_CODE SERIAL PRIMARY KEY,
    NAME VARCHAR(10),
    ID VARCHAR(50) UNIQUE NOT NULL,
    PASSWORD VARCHAR(50) NOT NULL,
    BIRTHDAY DATE,
    SEX CHAR(1),
    USER_TEL CHAR(11),
    USER_ADDR CHAR(255),
    DISABLED_HUMAN CHAR(1),
    MULTIFUL_CHILD CHAR(1),
    ELECTRIC_CAR CHAR(1),
    PERSON_MERIT CHAR(1),
    TAX_PAYMENT CHAR(1),
    ALONE_FAMILY CHAR(1)
);

CREATE TABLE user_custom_info (
    USER_CODE INT PRIMARY KEY,
    HOME VARCHAR(255),
    COMPANY VARCHAR(255),
    AREA_1 VARCHAR(255),
    AREA_2 VARCHAR(255),
    AREA_3 VARCHAR(255),
    AREA_4 VARCHAR(255),
    AREA_5 VARCHAR(255),
    FOREIGN KEY (USER_CODE) REFERENCES USER_info(USER_CODE) ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE TABLE USER_HISTORY (
    USER_CODE INT,
    DEPARTURE VARCHAR(255),
    DESTINATION VARCHAR(255),
    KILOMETERS DECIMAL(10, 2),
    DATE DATE,
    FOREIGN KEY (USER_CODE) REFERENCES USER_info(USER_CODE) ON DELETE CASCADE ON UPDATE CASCADE
);


-- insert test
-- INSERT INTO user_info(user_code, "name", id, "password", birthday, sex, disabled_human, multiful_child, electric_car, person_merit, tax_payment, alone_family, user_tel, user_addr)
-- VALUES (1, 'lmh', 'lmh123', '1234', DATE '2004-12-12', 'F', 'Y', 'N', 'N', 'Y', 'N', 'N','01012345678', '경기도 평택시');

-- select * from user_info;

